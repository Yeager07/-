# Работа #4 - Физические слои в Unity
Отчет по лабораторной работе #4 выполнил(а):
- Есипенко Игорь Ярославович
- РИ-320936
- АТ-09
# Цель работы: освоить работу с физическими слоями в Unity

![image](https://github.com/user-attachments/assets/f291e187-de7f-409c-9b7c-d9665ac3b269)

Рекомендуемые источники для изучения:
1.	Physical Layer Unity Documentation
2.	Тема Ragdoll в материалах лекции

# Задания к работе
# Задание 1 Настройка физических слоев в соответствии с требуемым сценарием
1.1 Создайте сцену, которая состоит из трех сфер и системы платформ, изображенной на рисунке ниже (платформы можно создать из обычных игровых объектов GameObject Cube). Пунктирными линиями показан будущий путь прохождения широв, который будет реализован в следующих пунктах задания.

![image](https://github.com/user-attachments/assets/c4b7c356-b12c-49c3-9bdb-0e4ddbd83498)

## Создал сцену, показанную выше *добавил на сцену объекты сферы: BlueSphere, RedSphere, OrangeSphere; объекты платформ: BlueCube(Begin, Middle, End соответственно), RedCube(Begin, Middle, End соответственно), OrangeCube(Begin, Middle, End соответственно); объекты платформ старта и финиша: BlackCubeStart, DarkRedCubeFinish* и назначил на каждый объект свой материал.

![image](https://github.com/user-attachments/assets/6266b744-544e-4494-8b39-79bdb690e567)

1.2 Выбор слоя для игрового объекта происходит в настройках инспектора Layer. Назначьте на созданные объекты физические слои (при необходимости создайте новые) так, чтобы путь сфер проходил через Start к Finish по указанному маршруту. Настройка матрицы коллизий производится в настройках Edit - Project Settings - Physics:

![image](https://github.com/user-attachments/assets/3561e717-a77c-40a0-a1cb-6b6d72ec3f17)

## Добавил на объекты сфер компонент Rigidbody, чтобы подключить к ним физику *чтобы они начали падать (Use Gravity)*, после чего назначил каждому объекту свой определённый слой (как сферам, так и платформам) и настроил матрицу коллизий для взаимодействия слоёв.

### Настройки для сфер

![image](https://github.com/user-attachments/assets/3d6b7893-ac00-4cc7-a1f8-98d909ad86ff)
![image](https://github.com/user-attachments/assets/b6fafb1d-4675-4f7c-af2f-49a3c88a3533)
![image](https://github.com/user-attachments/assets/0290a226-c9cd-4206-829b-2aa1ac6ad779)

### Настройки для платформ

![image](https://github.com/user-attachments/assets/0efd0095-30d6-42f8-8076-16ce483406a0)
![image](https://github.com/user-attachments/assets/cbfee1e2-8e37-420d-a9b8-34b742893e81)
![image](https://github.com/user-attachments/assets/0cfe2b9e-694f-4868-9c66-c241d35b7900)

### Настройки матрицы коллизий

![image](https://github.com/user-attachments/assets/0e7f0e2d-ffc2-47d1-a5ed-06328680d345)

1.3 Опишите корректную настройку матрицы коллизий. Какие слои вы создали дополнительно? Является ли предложенное вами решение оптимальным?

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
**Создал 4 слоя и использовал 1 предустановленный (Default): один (Default) для платформы BlackCubeStart и платформ, по которым не будут катиться сферы; три (BlueSphere, RedSphere, OrangeSphere) для каждой сферы и платформы, по которой будет катиться своя сфера; ещё один (MainWay) для последних платформ, по которым будут катиться все сферы (плюс платформа DarkRedCubeFinish).**

**Создал 4 дополнительных слоя: 3 слоя для каждой сферы и платформы, по которой она катится; 1 слой для платформ, по которым катятся все сферы.**

**Предложенное мной решение является оптимальным, так как “Чем меньше слоёв нужно обсчитывать на предмет коллизий, тем выше производительность”, в предложенном мною решении на предмет коллизий приходится обсчитывать всего 4 слоя.**
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

1.4 Модифицируйте настройку слоев таким образом, чтобы до финиша доходило только две сферы.

## Модифицировал настройку слоёв таким образом, чтобы до финиша доходило только две сферы: для оранжевой сферы назначил слой Default, который не контактирует со всеми остальными слоями (OrangeSphere просто падает вниз через все платформы).

![image](https://github.com/user-attachments/assets/17cf6c9e-66f0-4a22-8e67-ed3c492bae06)

1.5 Используя скрипт, приведенный ниже, отключите возможность взаимодействия коллайдеров двух оставшихся сфер на финише:

![image](https://github.com/user-attachments/assets/ae6970bc-c652-4b04-a58d-dda557d9716f)

## Используя скрипт, указанный выше, отключил возможность взаимодействия коллайдеров двух оставшихся сфер на финише, назначив данный скрипт два раза на платформу финиш (DarkRedCubeFinish), перечислив коллайдеры, которые не должны взаимодействовать друг с другом.

![image](https://github.com/user-attachments/assets/101ac5a5-619f-469c-8e1b-15df095001ae)

1.6 Модифицируйте матрицу коллизий таким образом, чтобы до финиша доходили только две сферы. Сферы должны останавливаться на финише и не должны иметь возможность взаимодействия друг с другом. При необходимости модифицируйте параметры материала коллайдера на финише. Опишите, как вы реализовали данное решение:

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
**В голове возникло два решения:**

**1. Изменить коллайдер платформы DarkRedCubeFinish.**

**2. Увеличить сопротивление среды для объектов BlueSphere и RedSphere.**

**Первый вариант не стал реализовывать, потому что посчитал его слишком лёгким, та и про изменение самого коллайдера у платформы в задании не сказано; Решил реализовать второй вариант (да, про изменение параметров сопротивления среды у объектов тоже ничего не сказано, но других вариантов придумать не смог).**

**У каждой сферы поставил значение сопротивления среды, равное 0.5; Создал физический материал коллайдера и применил его к платформе финиш (в параметрах материала указал Dynamic Friction = 1, Static Friction = 1, Bounciness = 0, Friction Combine = Maximum, Bounce Combine = Multiply).**
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

### Настрокйи материала платформы PhysicsMaterial

![image](https://github.com/user-attachments/assets/85be101c-a5df-4483-b8bd-3a476e077897)

### Настройки компонента Rigidbody для синей и красной сферы
![image](https://github.com/user-attachments/assets/e3ebd3f5-d6bb-4c8b-9adc-5d4475e66972)
![image](https://github.com/user-attachments/assets/836b40f4-0c1b-40f4-b6cb-2f5e7244646e)

1.7 В свойстве Culling Mask объекта Main Camera есть возможность рендерить лишь выбранные слои. Настройте камеру таким образом, чтобы игрок в окне Game видел единственный путь на сцене, по которому сферы достигают финиша. О существовании других путей “игрок” не должен знать.

## В свойстве Culling Mask объекта main Camera перечислил слои, которые должны отображаться во время проигрывания сцены (BlueSphere, RedSphere, OrangeSphere, MainWay).

![image](https://github.com/user-attachments/assets/2d0fa556-1c4f-4efd-988c-560adfed25a8)

1.8 Модифицируйте сцену таким образом, чтобы при достижении финиша одна из сфер отскакивала от финиша, а вторая оставалась на нём. Третья сфера должно проходить сквозь объект FINISH. Опишите, как вы реализовали данное решение:

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
**Данное решение реализовал следующим образом:**

**Создал дополнительную платформу FakeFinish с такими же размерами и на том же месте, что и платформу финиша DarkRedCubeFinish; назначил на неё новый материал коллайдера PhysicFakeFinishMaterial со следующими настойками (Dynamic Friction = 0, Static Friction = 0, Bounciness = 1, Friction Combine = Average, Bounce Combine = Multiply), чтобы добиться отскока от данной платформы; применил на неё скрипт ScriptIgnoreCollision 2 раза: первый раз указал коллайдеры платформы и оранжевой сферы, чтобы она падала сквозь платформу; второй раз указал коллайдеры платформы и синей сферы, чтобы сфера не отскакивала от платформы, попав на неё.**

**Объект DarkRedCubeFinish: к коллайдеру применил материал PhysicsPlatformMaterial, с помощью которого синяя сфера будет замедляться и останавливаться на платформе (настройки материала коллайдера: Dynamic Friction = 1, Static Friction = 1, Bounciness = 0, Friction Combine = Maximum, Bounce Combine = Multiply); применил скрипт ScriptIgnoreCollision два раза: первый раз указал коллайдеры синей и красной сферы, чтобы они не имели возможности контактировать друг с другом; второй раз указал коллайдеры платформы и оранжевой сферы, чтобы сфера проходила сквозь платформу и падала вниз.**

**Объект BlueSphere: двигается по своему пути, после чего останавливается на платформе (в компоненте Rigidbody изменил параметр сопротивления среды Drag на значение 0,5 , после чего останавливается на платформу финиша DarkRedCubeFinish.**

**Объект RedSphere: сфера двигается по своему маршруту, после чего отскакивает от платформы финиша FakeFinish.**

**Объект OrangeSphere: сфера движется по своему маршруту, после чего проходит сквозь платформы DarkRedCubeFinish и FakeFinish.**
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

### Настройки платформ финиша (DarkRedCubeFinish и FakeFinish)

![image](https://github.com/user-attachments/assets/6f0db71b-f0df-4c8d-95fd-a8aaf5baa85a)
![image](https://github.com/user-attachments/assets/13fc7dd7-a687-4c03-9ef1-9332a15ae7c0)

### Настройки сфер (BlueSphere, RedSphere и OrangeSphere)

![image](https://github.com/user-attachments/assets/0a2909e8-7b10-4eeb-987a-c830a8c139ae)
![image](https://github.com/user-attachments/assets/c2b3d65e-0cd0-46e4-a3ee-f662b152e664)
![image](https://github.com/user-attachments/assets/9803b071-f918-4898-a5f3-4402d988f977)

### Настойки материалов для платформ финиша
![image](https://github.com/user-attachments/assets/8e01acb3-4e6c-4e87-8abb-c087f8627d3a)
![image](https://github.com/user-attachments/assets/644b64c1-9342-437c-bdb2-6448ed094cd5)

1.12 Напишите развернутый вывод по проделанной работе. Как знания о матрице слоев и возможной настройки коллизий помогут в создании интерактивных приложений, игр и симуляторов?

-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
**В ходе данной лабораторной работы были выполненные поставленные задания и изучены основные принципы работы с механикой слоёв в Unity; Потренировался с создании своих собственных слоёв, а также в использовании уже имеющихся; Поработал с настройкой слоёв, а также матрицы коллизий; В настройках камеры поигрался с параметром, ответственным за отрисовку назначенных слоёв.**

**Полученные знания будут полезны при создании и настройке сцен окружения, а также взаимодействия с ними через параметры настройки слоёв и матрицы коллизий; В играх можно будет таким образом ставить невидимые преграды перед игроком (не очень приветствуется, но такое можно сделать) с помощью настройки отображения слоёв в параметрах камеры (Culling Mask); Также можно будет прикрутить механику отключения взаимодействия коллизий у объектов при их пересечении или выполнении какого-то другого условия (используя скрипт); Можно также сделать механику вылета пули из оружия.**
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
